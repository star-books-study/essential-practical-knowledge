# 4장. 외부 연동이 문제일 때 살펴봐야 할 것들
## 우리는 문제가 없는데
- 한 서비스의 장애는 연동된 서비스로 번짐

## 타임아웃
- 문제 악화 상황
  - A -> B 서비스 요청인데 B 서비스가 처리를 못해서 A 서비스에 B와 관련 없는 요청이 와도 처리 못함
  - 새로고침 해도 앞서 사용자가 보낸 요청을 여전히 처리 중
- 타임아웃을 설정하면 사용자는 타임아웃으로 지정한 시간 뒤에 에러 화면을 보게 됨
  - 무한 대기보다는 이게 나음

 ### 2가지 타임아웃 : 연결타임아웃, 읽기 타임아웃
 - 처음 연동하는 서비스라면 타임아웃 시간을 아래와 같이 설정한 뒤, 추이를 보면서 조정하는 게 좋음
   - 연결 타임아웃 : 3초 ~ 5초
   - 읽기 타임아웃 : 5초 ~ 30초
- 결제처럼 민감한 기능은 타임아웃 시간 길게 설정

## 재시도
### 재시도 가능 조건
- 단순 조회 기능
  - 재시도를 통해 성공확률 UP
- 연결 타임아웃
  - 재시도를 통해 성공확률 UP
- 멱등성을 가진 변경 기능
  - 읽기 타임아웃은 재시도할 때 주의해야 한다. 중복이 발생할 수 있음. 멱등성을 고려해야 함
  - 멱등성 : 연산을 여러 번 적용해도 결과가 달라지지 않는 성질
  

